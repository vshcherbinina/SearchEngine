# Локальный поисковый движок по сайтам
Веб-приложение, предоставляющее возможность поиска страниц определенных сайтов по запросу - 
фразе или нескольким словам. 
Результаты выдаются порционно со ссылками на страницы и сниппетами, соответствующих запросу. 

Для более быстрого и качественного поиска необходимо выполнить предварительную подготовку - индексацию:
- Проиндексировать можно как все сайты целиком (полная индексация), так и отдельную страницу
- Индексация выполняется по списку сайтов, указанных в настройках: осуществляется парсинг страниц и русских слов 
- Все значения - страницы и слова, приведенные к нормальным формам (леммам), сохраняются в базе данных
- Общая информация об индексации представлена в дашборде

## Технологии
- Backend: 
  - Java version: 17.0.9
  - Spring Boot
  - Data Base MySQL
- REST API
- Frontend (SPA)
  - html, css, js

## Установка и настройка

### Установка
- Java, рекомендуемая версия 17.0.9
- Apache-maven (3.9.5)
- Скачать данный проект из github
- Установить Data Base MySQL
  - Создать схему search_engine (или скорректировать настройку spring.datasource.url). Для корректной загрузки контента страниц в схему, рекомендуется установить Charset = utf8mb4
  - Создать пользователя с именем "worker" и "паролем "Test2000" (или скорректировать настройки spring.datasource.username и password)
  - Первичный запуск должен производиться с настройкой spring.jpa.hibernate.ddl-auto = create, чтобы создались необходимые таблицы и индексы. Для последующих запусков настройка должна быть выставлена в none

### Настройки application.yaml
- parsing-settings.sites - список сайтов, по которым будет осуществляться поиск
- indexing-settings (группа настроек процессов индексации)
  - sleep-time-ms - количество времени в миллисекундах, через которое выполняется проверка состояния процессов при выполнении полной индексации (ограничение - не может быть меньше 1000)
  - count-pages-for-update - количество распарсенных страниц при выполнении полной индексации для периодичности обновления состояния процесса индексации сайта в базе данных
  - load-page (группа настроек, используемая при загрузке страниц во избежание блокировок со стороны опрашиваемых сайтов)
    - sleep-load-page-ms - количество времени в миллисекундах, через которое будет выполняется загрузка страницы для одного сайта
    - user-agent - информация о приложении клиента
    - referrer - URL источника запроса
  - search (группа настроек, используемых для формирования результатов поиска)
    - frequency-popular-lemma - частота повторов леммы в пределах сайта, при которой лемма считается "часто встречаемой", такие леммы исключаются из результатов поиска
    - min-count-lemmas - минимальное количество лемм при поиске, которое не подлежит исключению "часто встречаемых"
    - snippet-max-length - размер сниппета в символах
- server.port - порт для приложения, по умолчанию 8080
- spring - группа настроек для работы с базой данных

## Запуск
Запуск приложения осуществляется через браузер по адресу localhost и порта, указанного в настройке server.port, по умолчанию:
http://localhost:8080/

Перед этим необходимо запустить сервер либо через IDE, либо сформировать и запустить jar-файл:
java -jar SearchEngine-1.0-SNAPSHOT.jar
Также необходим файл с настройками application.yaml (должен находиться в каталоге, откуда выполняется запуск сервера)

## Описание
Приложение представляет из себя одностраничное web-приложение (SPA), осуществляющее взаимодействие с сервером по протоколу REST API.

Состоит из 3 вкладок:

### Dashboard
![Dashboard.jpg](src%2Fmain%2Fresources%2Fpng%2FDashboard.jpg)

Статистика по выполненной индексации. 
Содержит общее количество сайтов, страниц, лемм и расшифровку по каждому из сайтов, по которым производился процесс индексации.

### Management
Выполняются операции по индексации страниц:

#### Запуск полной индексации
По списку сайтов, указанному в настройках, осуществляется парсинг всех страниц - страницы сохраняются в базе данных (url-адрес страницы, контент и статус ответа).
А также формируется и сохраняется в базе данных список слов (лемм) для каждой страницы.
Запуск выполняется в многопоточном режиме. Все предыдущие данные (если были), удаляются из базы данных.

#### Остановка индексации
При остановке индексации, процессы завершают парсинг текущих страниц и останавливаются. При этом сохраняются со статусом "FILED" (Индексация остановлена пользователем).

#### Запуск индексации по отдельной странице
При выполнении индексации отдельной страницы, происходит ее загрузка и парсинг контента для составления списка используемых лемм.
Также статус сайта обновляется по итогу индексации страницы.

### Search
На данной вкладке выполняется поиск фразы (набора слов), введенных в строке поиска среди предварительно проиндексированных страниц сайтов.
Поиск осуществляется по библиотеке русских слов (другие языки не поддерживаются и будут исключены из поиска).

Результат выводится на страницу в виде ссылки на страницы и сниппеты, содержащие слова из строки поиска.
При формировании поиска осуществляется исключение слов, встречающихся "слишком часто" в пределах сайта. Величина данной характеристики задается в настройке и может быть изменена. 

### Для чего этот проект?
Данный проект является курсовой работой по итогу прохождения обучающего курса Skillbox java-разработки
